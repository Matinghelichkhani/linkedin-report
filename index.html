<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>فرم گزارش فعالیت لینکدین | دیدار</title>

  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;700;800&display=swap" rel="stylesheet">

  <style>
    :root {
      --brand:#02AF9E;
      --brand-600:#079c8e;
      --brand-faint:#e6faf7;
      --ink:#0f172a;
      --ink-700:#334155;
      --muted:#64748b;
      --line:#e5e7eb;
      --bg:#f8fafc;
      --white:#fff;
      --radius:16px;
      --shadow:0 10px 30px rgba(2,175,158,.08);
      --focus:0 0 0 4px rgba(2,175,158,.18);
    }
    * { box-sizing: border-box; }
    html, body { min-height: 100%; margin: 0; font-family:"Vazirmatn",system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif; color:var(--ink); background: var(--bg); padding:28px 20px; }
    .shell { width:min(860px,96vw); margin-inline:auto; }
    .brandbar { display:flex; align-items:center; justify-content:space-between; flex-wrap:wrap; gap:8px 12px; margin-bottom:22px; padding:6px 2px; }
    .brand-left { display:flex; align-items:center; gap:12px; min-width:0; flex:1 1 auto; }
    .brand-title { font-weight:800; letter-spacing:.2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .brand-title strong { color:var(--brand); }
    .logo { height:38px; width:auto; display:block; filter: drop-shadow(0 6px 16px rgba(2,175,158,.18)); }
    .card { background:var(--white); border:1px solid var(--line); border-radius:var(--radius); box-shadow:var(--shadow); padding:22px 22px 18px; }
    h1 { margin:0 0 8px; font-size:22px; font-weight:800; }
    .subtitle { margin:0 0 18px; color:var(--ink-700); font-size:14px; }
    .badge { display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; background:var(--brand-faint); color:var(--brand); font-size:12px; font-weight:700; margin-bottom:10px; border:1px solid rgba(2,175,158,.18); }
    .badge-dot { width:6px; height:6px; border-radius:50%; background:var(--brand); box-shadow:0 0 0 6px rgba(2,175,158,.12); }
    .grid { display:grid; gap:14px; grid-template-columns:1fr 1fr; margin-bottom:28px; }
    .grid.full { grid-template-columns:1fr; margin-bottom:28px; }
    label.field { display:flex; flex-direction:column; }
    .label-text { font-size:13px; margin-bottom:6px; }
    .label-text.req::after { content:" *"; color:#e11d48; font-weight:700; }
    input, select, button { font-family:inherit; }
    input, select { appearance:none; outline:none; color:inherit; border:1px solid var(--line); background:#fff; border-radius:12px; padding:11px 12px; transition:border .15s ease, box-shadow .15s ease, transform .04s ease; }
    input::placeholder { color:#94a3b8; }
    input:focus, select:focus { border-color:var(--brand); box-shadow:var(--focus); }
    select { color:var(--ink); background-color:#fff; font-weight:600; border-color:#cbd5e1; }
    select:invalid { color:#94a3b8; font-weight:400; }
    select option { color:#0f172a; }
    option[value=""] { color:#94a3b8; }
    input[type="number"] { min-width:0; }
    input[type="month"] { padding:10px 12px; }
    .hint { font-size:12px; color:#8a97a7; }
    .pre-submit-note { margin:22px 0 14px; font-size:13px; color:var(--ink-700); background:#f1f5f9; border:1px dashed var(--line); border-radius:12px; padding:10px 12px; }
    .actions { margin-top:6px; }
    button { width:100%; padding:13px 14px; border-radius:12px; border:0; cursor:pointer; background:linear-gradient(180deg, var(--brand) 0%, var(--brand-600) 100%); color:white; font-weight:800; letter-spacing:.25px; box-shadow:0 8px 20px rgba(2,175,158,.28); transition:transform .05s ease, filter .18s ease; font-size:16px; }
    button:hover { filter:brightness(1.02); }
    button:active { transform:translateY(1px); }
    button:disabled { opacity:.6; cursor:not-allowed; filter:grayscale(.1); }
    .toast { margin-top:12px; padding:10px 12px; border-radius:12px; font-size:13px; display:none; border:1px solid transparent; }
    .toast.show { display:block; }
    .toast.success { color:#065f46; background:#ecfdf5; border-color:#a7f3d0; }
    .toast.error { color:#7f1d1d; background:#fef2f2; border-color:#fecaca; }
    .footer { margin-top:16px; display:flex; justify-content:center; gap:6px; font-size:12px; color:#94a3b8; }
    .footer a { color:var(--brand); text-decoration:none; }
    .footer a:hover { text-decoration:underline; }
    @media (max-width:780px) { .grid { grid-template-columns:1fr; } }
  </style>
</head>

<body>
  <div class="shell">
    <div class="brandbar">
      <div class="brand-left">
        <div class="brand-title">دیدار | <strong>فرم گزارش لینکدین</strong></div>
      </div>
    </div>

    <form id="form" class="card" method="POST"
          action="https://app-n8n-gd0e6.apps.teh2.abrhapaas.com/webhook/linkedin-report"
          novalidate>

      <span class="badge"><span class="badge-dot"></span> ثبت ماهانه عملکرد</span>
      <h1>گزارش فعالیت لینکدین</h1>
      <p class="subtitle">لطفاً فرم را کامل کنید؛ برای هر پستی که منتشر کردید این فرم را تکمیل کنید.</p>

      <div class="grid full">
        <label class="field" for="full_name">
          <span class="label-text req">نام</span>
          <select id="full_name" name="full_name" required>
            <option value="" selected disabled>انتخاب کنید…</option>
            <option>محمدجواد کریمی</option>
            <option>ایمان بوستان</option>
            <option>میلاد فخرآبادی</option>
            <option>هانیه موسی زاده</option>
            <option>شبنم چاووشی</option>
            <option>علیرضا  امینی</option>
            <option>مونا فصاحتی</option>
            <option>شهره عباسی</option>
            <option>یاسمن حسینی</option>
            <option>نشاط کردی</option>
            <option>حدیث فراهانی</option>
            <option>حسام هاشمی</option>
            <option>غزل پوراسدی</option>
            <option>فروزان الماسی</option>
            <option>نوید شهلایی</option>
          </select>
        </label>
      </div>

      <div class="grid full">
        <label class="field" for="post_url">
          <span class="label-text req">لینک پست لینکدین</span>
          <input id="post_url" name="post_url" required placeholder="https://www.linkedin.com/posts/..."
                 pattern="https?://(www\.)?linkedin\.com/.+" inputmode="url">
          <span class="hint">با <b>https://www.linkedin.com/</b> شروع شود.</span>
        </label>
      </div>

      <div class="grid">
        <label class="field" for="likes">
          <span class="label-text req">تعداد لایک</span>
          <input id="likes" name="likes" type="number" inputmode="numeric" min="0" step="1" required placeholder="0">
        </label>
        <label class="field" for="comments">
          <span class="label-text req">تعداد کامنت</span>
          <input id="comments" name="comments" type="number" inputmode="numeric" min="0" step="1" required placeholder="0">
        </label>
      </div>

      <div class="grid">
        <label class="field" for="reposts">
          <span class="label-text req">تعداد ری‌پست</span>
          <input id="reposts" name="reposts" type="number" inputmode="numeric" min="0" step="1" required placeholder="0">
        </label>
        <label class="field" for="followers">
          <span class="label-text req">تعداد فالوئر</span>
          <input id="followers" name="followers" type="number" inputmode="numeric" min="0" step="1" required placeholder="مثلاً 2500">
        </label>
      </div>

      <div class="grid full">
        <label class="field" for="month">
          <span class="label-text req">ماه (YYYY-MM)</span>
          <input id="month" name="month" type="month" required>
        </label>
      </div>

      <div class="pre-submit-note">برای تکمیل فرم روی دکمه «ثبت اطلاعات» کلیک کنید.</div>

      <div class="actions">
        <button id="submitBtn" type="submit">ثبت اطلاعات</button>
        <div id="toast" class="toast" role="status" aria-live="polite"></div>
      </div>

      <div class="footer">
        <span>© دیدار</span><span>•</span><a href="https://didar.me/" target="_blank">didar.me</a>
      </div>
    </form>
  </div>

  <script>
    const form = document.getElementById('form');
    const toast = document.getElementById('toast');
    const submitBtn = document.getElementById('submitBtn');

    function showToast(type, msg){
      toast.className = 'toast show ' + (type==='success'?'success':'error');
      toast.textContent = msg;
    }

    function validateField(el){
      if(el.validity.valueMissing) return 'لطفاً این فیلد را کامل کنید.';
      if(el.name==='post_url'){
        if(!/^https?:\/\/(www\.)?linkedin\.com\/.+/i.test(el.value.trim()))
          return 'لینک معتبر لینکدین وارد کنید (با https://www.linkedin.com/ شروع شود).';
      }
      if(el.type==='number'){
        if(el.validity.badInput) return 'عدد معتبر وارد کنید.';
        if(el.validity.rangeUnderflow) return `کمترین مقدار ${el.min} است.`;
      }
      return '';
    }

    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const fields = Array.from(form.querySelectorAll('input[required], select[required]'));
      for(const el of fields){
        const err = validateField(el);
        if(err){ el.focus(); showToast('error', err); return; }
      }

      submitBtn.disabled=true;
      showToast('success','در حال ارسال…');

      try{
        const fd = new FormData(form);
        const resp = await fetch(form.action,{
          method:'POST',
          body:new URLSearchParams(fd),
          headers:{'Content-Type':'application/x-www-form-urlencoded'}
        });
        const text = await resp.text();
        if(resp.ok){
          showToast('success','اطلاعات با موفقیت ثبت شد ✔');
          form.reset();
        } else { showToast('error', text || 'خطا در ثبت اطلاعات'); }
      } catch(err){ showToast('error','ارتباط برقرار نشد. دوباره تلاش کنید.'); }
      finally{ submitBtn.disabled=false; }
    });

    form.addEventListener('input', ()=>{
      if(toast.classList.contains('show') && toast.classList.contains('error')){
        toast.classList.remove('show');
      }
    });
  </script>
</body>
</html>
